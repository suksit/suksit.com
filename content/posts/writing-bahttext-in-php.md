---
title: "Writing BAHTTEXT() in PHP"
date: 2018-06-16T16:53:53+07:00
tags: ["php", "bahttext", "rant", "code"]
---

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏°‡∏µ‡∏Ñ‡∏ô‡∏°‡∏≤‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ñ‡∏≤‡∏°‡πÉ‡∏ô LINE ‡∏ß‡πà‡∏≤ ‡∏à‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î PHP ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏±‡πâ‡∏ô‡πÜ ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î FoxPro ‡∏ó‡∏µ‡πà‡πÅ‡∏õ‡∏∞‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°

```foxpro
FUNCTION spell

PARAMETER Vn
Va = STRT(TRAN(Vn,'@R G9A9B9C9D9E9F9A9B9C9D9E9F9.9F9S'),' F0.','')

RETURN STRT(STRT(STRT(STRT(STRT(STRT(STRT(STRT(STRT(STRT(STRT(STRT(STRT(;
STRT(STRT(STRT(STRT(STRT(STRT(STRT(STRT(STRT(STRT(STRT(STRT(STRT(STRT(;
SUBS(Va,RAT(' ',Va)+2,35),'1','‡∏´‡∏ô‡∏∂‡πà‡∏á'),'2','‡∏™‡∏≠‡∏á'),'3','‡∏™‡∏≤‡∏°'),'4','‡∏™‡∏µ‡πà'),;
'5','‡∏´‡πâ‡∏≤'),'6','‡∏´‡∏Å'),'7','‡πÄ‡∏à‡πá‡∏î'),'8','‡πÅ‡∏õ‡∏î'),'9','‡πÄ‡∏Å‡πâ‡∏≤'),'.0F0S','‡∏ö‡∏≤‡∏ó‡∏ñ‡πâ‡∏ß‡∏ô'),;
'0F',''),'0E',''),'0D',''),'0C',''),'0B',''),'0',''),'A','‡∏•‡πâ‡∏≤‡∏ô'),;
'B','‡πÅ‡∏™‡∏ô'),'C','‡∏´‡∏°‡∏∑‡πà‡∏ô'),'D','‡∏û‡∏±‡∏ô'),'E','‡∏£‡πâ‡∏≠‡∏¢'),'F','‡∏™‡∏¥‡∏ö'),'.','‡∏ö‡∏≤‡∏ó'),;
'‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏™‡∏¥‡∏ö','‡∏™‡∏¥‡∏ö'),'‡∏™‡∏≠‡∏á‡∏™‡∏¥‡∏ö','‡∏¢‡∏µ‡πà‡∏™‡∏¥‡∏ö'),'‡∏™‡∏¥‡∏ö‡∏´‡∏ô‡∏∂‡πà‡∏á','‡∏™‡∏¥‡∏ö‡πÄ‡∏≠‡πá‡∏î'),'S','‡∏™‡∏ï‡∏≤‡∏á‡∏Ñ‡πå')
```

‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à‡∏î‡∏µ‡πÄ‡∏•‡∏¢‡∏•‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏î‡∏π ‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô‡∏ß‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤‡∏™‡∏±‡πâ‡∏ô üòÖ ‡πÅ‡∏ï‡πà‡∏Å‡πá‡∏™‡∏ô‡∏∏‡∏Å‡∏î‡∏µ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ ‡πÄ‡∏•‡∏¢‡∏Ç‡∏≠‡∏à‡∏î‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏´‡∏ô‡πà‡∏≠‡∏¢ ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏•‡∏≠‡∏Å‡∏Ç‡∏≠‡∏á Excel ‡∏°‡∏≤ ‡∏Ñ‡∏∑‡∏≠‡∏õ‡∏±‡∏î‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏≠‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏•‡∏ö ‡∏Ñ‡πà‡∏≤‡∏®‡∏π‡∏ô‡∏¢‡πå ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏¢‡∏≤‡∏ß‡πÜ ‡πÑ‡∏î‡πâ (‡πÄ‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ PHPUnit ‡∏Ñ‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏î‡∏±‡∏ö 1&times;10<sup>12</sup> ‡∏¢‡∏±‡∏á‡πÇ‡∏≠‡πÄ‡∏Ñ‡∏≠‡∏¢‡∏π‡πà) ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡πÇ‡∏Ñ‡πâ‡∏î‡∏Å‡πá‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ô‡∏µ‡πâ
<!--more-->
```php
<?php
declare(strict_types=1);

function bahtText(float $amount): string
{
    [$integer, $fraction] = explode('.', number_format(abs($amount), 2, '.', ''));

    $baht = convert($integer);
    $satang = convert($fraction);

    $output = $amount < 0 ? '‡∏•‡∏ö' : '';
    $output .= $baht ? $baht.'‡∏ö‡∏≤‡∏ó' : '';
    $output .= $satang ? $satang.'‡∏™‡∏ï‡∏≤‡∏á‡∏Ñ‡πå' : '‡∏ñ‡πâ‡∏ß‡∏ô';

    return $baht.$satang === '' ? '‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ö‡∏≤‡∏ó‡∏ñ‡πâ‡∏ß‡∏ô' : $output;
}

function convert(string $number): string
{
    $values = ['', '‡∏´‡∏ô‡∏∂‡πà‡∏á', '‡∏™‡∏≠‡∏á', '‡∏™‡∏≤‡∏°', '‡∏™‡∏µ‡πà', '‡∏´‡πâ‡∏≤', '‡∏´‡∏Å', '‡πÄ‡∏à‡πá‡∏î', '‡πÅ‡∏õ‡∏î', '‡πÄ‡∏Å‡πâ‡∏≤'];
    $places = ['', '‡∏™‡∏¥‡∏ö', '‡∏£‡πâ‡∏≠‡∏¢', '‡∏û‡∏±‡∏ô', '‡∏´‡∏°‡∏∑‡πà‡∏ô', '‡πÅ‡∏™‡∏ô', '‡∏•‡πâ‡∏≤‡∏ô'];
    $exceptions = ['‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏™‡∏¥‡∏ö' => '‡∏™‡∏¥‡∏ö', '‡∏™‡∏≠‡∏á‡∏™‡∏¥‡∏ö' => '‡∏¢‡∏µ‡πà‡∏™‡∏¥‡∏ö', '‡∏™‡∏¥‡∏ö‡∏´‡∏ô‡∏∂‡πà‡∏á' => '‡∏™‡∏¥‡∏ö‡πÄ‡∏≠‡πá‡∏î'];

    $output = '';

    foreach (str_split(strrev($number)) as $place => $value) {
        if ($place % 6 === 0 && $place > 0) {
            $output = $places[6].$output;
        }

        if ($value !== '0') {
            $output = $values[$value].$places[$place % 6].$output;
        }
    }

    foreach ($exceptions as $search => $replace) {
        $output = str_replace($search, $replace, $output);
    }

    return $output;
}
```

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ üòÜ

```php
<?php
echo bahtText(0)."\n";
echo bahtText(11)."\n";
echo bahtText(0.5)."\n";
echo bahtText(1270851.375291)."\n";
echo bahtText(-185409.12)."\n";

# results
‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ö‡∏≤‡∏ó‡∏ñ‡πâ‡∏ß‡∏ô
‡∏™‡∏¥‡∏ö‡πÄ‡∏≠‡πá‡∏î‡∏ö‡∏≤‡∏ó‡∏ñ‡πâ‡∏ß‡∏ô
‡∏´‡πâ‡∏≤‡∏™‡∏¥‡∏ö‡∏™‡∏ï‡∏≤‡∏á‡∏Ñ‡πå
‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏•‡πâ‡∏≤‡∏ô‡∏™‡∏≠‡∏á‡πÅ‡∏™‡∏ô‡πÄ‡∏à‡πá‡∏î‡∏´‡∏°‡∏∑‡πà‡∏ô‡πÅ‡∏õ‡∏î‡∏£‡πâ‡∏≠‡∏¢‡∏´‡πâ‡∏≤‡∏™‡∏¥‡∏ö‡πÄ‡∏≠‡πá‡∏î‡∏ö‡∏≤‡∏ó‡∏™‡∏≤‡∏°‡∏™‡∏¥‡∏ö‡πÅ‡∏õ‡∏î‡∏™‡∏ï‡∏≤‡∏á‡∏Ñ‡πå
‡∏•‡∏ö‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÅ‡∏™‡∏ô‡πÅ‡∏õ‡∏î‡∏´‡∏°‡∏∑‡πà‡∏ô‡∏´‡πâ‡∏≤‡∏û‡∏±‡∏ô‡∏™‡∏µ‡πà‡∏£‡πâ‡∏≠‡∏¢‡πÄ‡∏Å‡πâ‡∏≤‡∏ö‡∏≤‡∏ó‡∏™‡∏¥‡∏ö‡∏™‡∏≠‡∏á‡∏™‡∏ï‡∏≤‡∏á‡∏Ñ‡πå
```
