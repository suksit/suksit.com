---
title: "Changing Docker Bridge Network IP"
date: 2017-10-19T21:16:53+07:00
tags: [ "docker", "networking", "devops", "code" ]
---

‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Docker ‡πÅ‡∏ö‡∏ö‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏±‡∏á ‡πÇ‡∏î‡∏¢‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå [Gogs](https://gogs.io/) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏ã‡∏≠‡∏£‡πå‡∏™‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô ‡πÅ‡∏ï‡πà‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏ö‡∏≤‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏î‡πâ ‡∏ó‡∏µ‡πÅ‡∏£‡∏Å‡∏ô‡∏∂‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ô‡πá‡∏ï‡πÄ‡∏ß‡∏¥‡∏£‡πå‡∏Å ‡πÅ‡∏ï‡πà‡πÄ‡∏ä‡πá‡∏Ñ‡πÑ‡∏õ‡πÄ‡∏ä‡πá‡∏Ñ‡∏°‡∏≤‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏£‡∏≤‡∏∞ Docker ‡∏°‡∏±‡∏ô‡πÑ‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á bridge network interface ‡πÄ‡∏õ‡πá‡∏ô IP ‡∏ß‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏≤‡πÄ‡∏ô‡πá‡∏ï‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô üòë

‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà Google ‡∏°‡∏≤‡πÑ‡∏î‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ß‡πà‡∏≤ default bridge network interface ‡∏Ç‡∏≠‡∏á Docker ‡πÉ‡∏ô‡∏•‡∏¥‡∏ô‡∏∏‡∏Å‡∏ã‡πå ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠ `docker0` ‡πÅ‡∏•‡∏∞‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏á private IP ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å 172.17.0.0 (‡πÄ‡∏î‡∏≤‡∏ß‡πà‡∏≤‡∏ô‡πà‡∏≤‡∏à‡∏∞‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô [private IPv4 address space](https://en.wikipedia.org/wiki/Private_network)) ‡∏ã‡∏∂‡πà‡∏á‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ IP ‡∏ß‡∏á 172.17.x.x ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏à‡∏∞‡∏á‡∏á‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö

<!--more-->

‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡∏Ñ‡∏∑‡∏≠ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô config ‡∏Ç‡∏≠‡∏á Docker daemon ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `/etc/docker/daemon.json` (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢) ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏î‡πâ‡∏ö‡πâ‡∏≤‡∏á ‡∏î‡∏π‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å [options ‡∏Ç‡∏≠‡∏á dockerd](https://docs.docker.com/engine/reference/commandline/dockerd/) ‡∏ó‡∏µ‡πà‡∏ú‡∏°‡∏ó‡∏≥‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏Ñ‡πà‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå `daemon.json` ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ

```json
{
  "bip": "192.168.1.1/24"
}
```

‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏µ‡πâ default bridge network ‡∏Ç‡∏≠‡∏á Docker ‡∏Å‡πá‡∏à‡∏∞‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô IP ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ï‡∏±‡πâ‡∏á&hellip; ‡πÅ‡∏ï‡πà‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ï‡πà‡∏≠‡∏°‡∏≤‡∏Ñ‡∏∑‡∏≠‡∏ï‡∏±‡∏ß bridge network interface ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏î‡∏¢ Docker Compose ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏£‡∏±‡∏ô‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å 192.168.1.0 ‡∏°‡∏±‡∏ô‡∏î‡∏±‡∏ô‡πÑ‡∏õ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà 172.17.0.0 ‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å ü§£ ‡∏•‡∏≠‡∏á Google ‡∏≠‡∏µ‡∏Å‡∏£‡∏≠‡∏ö‡∏Å‡πá‡∏û‡∏ö‡∏ß‡πà‡∏≤[‡∏°‡∏µ‡∏Ñ‡∏ô‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏°‡πà‡∏ô‡πâ‡∏≠‡∏¢](https://github.com/moby/moby/pull/29376)

‡∏ñ‡πâ‡∏≤‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡πÉ‡∏ô pull request ‡∏Ç‡πâ‡∏≤‡∏á‡∏ö‡∏ô‡∏à‡∏∞‡∏û‡∏ö‡∏ß‡πà‡∏≤‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ workaround ‡πÅ‡∏Ñ‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Ñ‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á hard code network ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `docker-compose.yml` ‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô ‡πÇ‡∏î‡∏¢‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ô‡∏µ‡πâ

```yaml
version: "3"

services:
  ... <service definitions>

volumes:
  ... <volume definitions>

networks:
  default:
    ipam:
      config:
        - subnet: 192.168.2.0/24
```

‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏µ‡πâ bridge network interface ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏î‡∏¢ Docker Compose ‡∏Å‡πá‡∏à‡∏∞‡∏°‡∏µ IP ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ß‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ üòÅ
